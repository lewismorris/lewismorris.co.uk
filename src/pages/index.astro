---
import Layout from "../layouts/Layout.astro";
import { sanityClient } from 'sanity:client';
import { differenceInYears } from 'date-fns';

const posts = await sanityClient.fetch<
  { _id: string; title: string; slug: { current: string }; date: string }[]
>(
  `*[_type == "post" && defined(slug.current)] | order(date desc) {
    _id,
    title,
    slug,
    date
  }`,
);
---

<Layout>
  <main
    class="max-w-2xl w-full mx-auto px-6 md:px-12 space-y-8"
  >
    <section class="space-y-4">
      <h1 class="text-3xl font-medium">Lewis Morris</h1>
      <p>I'm a product engineer who's spent the last {differenceInYears(new Date(), new Date('2011-01-01'))} years building things for the web</p>
      <p>I've spent my life working on the web. I built websites for friends and family, started online businesses from my bedroom as a teenager, and ran one of the UK's best <a href="https://middlesbroughfe.co.uk">Front End conferences</a> for six years. Now I help companies build products that are fast, accessible and easy to maintain.</p>
    </section>
   
    <hr class="w-full border-neutral-200 dark:border-neutral-800" />

    <section class="space-y-4">
      <h2 class="text-3xl font-medium">Writing</h2>
      <ul class="list-disc list-inside">
        {posts.map((post) => (
          <li>
            <a href={`/writing/${post.slug.current}`}>{post.title}</a>
          </li>
        ))}
      </ul>
    </section>

    <hr class="w-full border-neutral-200 dark:border-neutral-800" />

    <section class="space-y-4">
      <h2 class="text-3xl font-medium">Photos</h2>
      <p>I've been taking photos to get away from the desk.</p>
      <p>Most of what you'll find here is the North East, planes, and whatever caught my eye on a walk. <a href="/photos">Have a look</a>.</p>
    </section>

    <hr class="w-full border-neutral-200 dark:border-neutral-800" />

    <p>Find me on <a href="https://x.com/lewimorris" target="_blank" rel="noopener noreferrer">X</a>, building on <a href="https://github.com/lewismorris" target="_blank" rel="noopener noreferrer">GitHub</a>, and being professional on <a href="https://linkedin.com/in/lewisjamesmorris" target="_blank" rel="noopener noreferrer">LinkedIn</a>. If you want to work together or chat about something I've built, drop me a message <a href="mailto:lewis@lewismorris.co.uk?subject=Hello!">here</a>.</p>
  </main>
</Layout>

